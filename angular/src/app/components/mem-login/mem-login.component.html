<div class="login-container">
  <div class="login-content">

    <div >
      <h1 class="mat-title">{{ currentPage.title }}</h1>
      <p class="mat-small">{{ currentPage.message }}</p>
    </div>

    <form [formGroup]="form" fxLayout="column" fxLayoutAlign="space-around stretch" fxLayoutGap="10px" (ngSubmit)="activate(page)">

      <!-- ERROR MESSAGE -->
      <mat-error *ngIf="error">{{ error }}</mat-error>

      <!-- <div fxLayout="row wrap" fxLayoutGap="10px grid">
        <div fxFlex="50%"></div>
        <div fxFlex="50%"></div>
      </div> -->
      <!-- FIRST NAME -->
      <mat-form-field appearance="legacy" *ngIf="form.contains('first_name')">
        <mat-label>First name</mat-label>
        <input matInput formControlName="first_name">
        <mat-error *ngIf="form.controls.first_name.errors?.required">
          Please insert your first name here
        </mat-error>
      </mat-form-field>

      <!-- LAST NAME -->
      <mat-form-field appearance="legacy" *ngIf="form.contains('last_name')">
        <mat-label>Last name</mat-label>
        <input matInput formControlName="last_name">
        <mat-error *ngIf="form.controls.last_name.errors?.required">
          Please insert your last name here
        </mat-error>
      </mat-form-field>

      <!-- EMAIL -->
      <mat-form-field appearance="legacy" *ngIf="form.contains('email')">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email">
        <mat-error *ngIf="form.controls.email.errors?.required">
          Please specify an email address
        </mat-error>
        <mat-error *ngIf="form.controls.email.errors?.email">
          Ooops! it looks like this is not a valid email
        </mat-error>
      </mat-form-field>

      <!-- PASSWORD -->
      <mat-form-field appearance="legacy" *ngIf="form.contains('password')">
        <mat-label>Password</mat-label>
        <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
        <mat-icon matSuffix (click)="hidePassword = !hidePassword">
          {{ hidePassword ? 'visibility_off' : 'visibility'}}
        </mat-icon>
        <mat-error *ngIf="form.controls.password.errors?.required">
          A password is required
        </mat-error>
        <mat-hint class="mat-link" align="end" (click)="switchPage('forgotPassword')" *ngIf="page == 'signIn'">Forgot password?</mat-hint>
      </mat-form-field>

      <!-- NEW EMAIL -->
      <mat-form-field appearance="legacy" *ngIf="form.contains('newEmail')">
        <mat-label>New email</mat-label>
        <input matInput formControlName="newEmail">
        <mat-error *ngIf="form.controls.newEmail.errors?.required">
          A new email is required
        </mat-error>
        <mat-error *ngIf="form.controls.newEmail.errors?.email">
          This email looks wrong
        </mat-error>
      </mat-form-field>

      <!-- NEW PASSWORD -->
      <mat-form-field appearance="legacy" *ngIf="form.contains('newPassword')">
        <mat-label>New  password</mat-label>
        <input matInput formControlName="newPassword">
        <mat-error *ngIf="form.controls.newPassword.errors?.required">
          A new password is required
        </mat-error>
      </mat-form-field>

      <!-- ACTION BUTTON -->
      <button mat-stroked-button color="primary" type="submit" [disabled]="!form.valid" class="btn">
        {{ currentPage.caption }}
      </button>

      <mat-progress-bar *ngIf="progress" mode="indeterminate"></mat-progress-bar>

    </form>

    <p class="mat-small" *ngIf="page == 'signIn'">
      Are you a new user? <span class="mat-link" (click)="switchPage('register')">Register</span>
    </p>

    <p class="mat-small" *ngIf="page === 'register' || page === 'forgotPassword'">
      Already have login and password? <span class="mat-link" (click)="switchPage('signIn')">Sign-in</span>
    </p>

    <!-- SIGN-IN PROVIDERS -->
    <!-- <div fxLayout="column" fxLayoutAlign="center center" *ngIf="page == 'signIn'">

      <p class="mat-small">or sign-in with:</p>

      <div fxLayout="row wrap" fxLayoutAlign="center center" fxLayoutGap="10px">

        <button mat-icon-button *ngFor="let p of providers" (click)="signInWith(p.name)">
          <mat-icon class="providers"
                    [fontSet]="p.icon.split(':')[0]"
                    [fontIcon]="p.icon.split(':')[1]" 
                    [ngStyle]="{ color: p.color }">
          </mat-icon>
        </button>
      </div>
    </div> -->

  </div>
</div>